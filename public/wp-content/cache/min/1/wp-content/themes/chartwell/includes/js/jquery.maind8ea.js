var $=jQuery.noConflict();jQuery(document).ready(function(){isElementExist(".nav-drop",initSmartMenu);initHeaderHeight();initAddClasses();initCustomForms();initAOS();initButtonAnim();initAnimation();initLoadMore();initSlider();jQuery(document).on('click','#hp-load-news',function(e){e.preventDefault();var page=jQuery('#hp-load-news').data('page');var author=jQuery('#hp-load-news').data('author');var cat=jQuery('#hp-load-news').data('cat');var post__not_in=jQuery('#hp-load-news').data('post__not_in');console.log(post__not_in);jQuery('.load-more').hide();$.ajax({url:ajaxurl,type:'post',dataType:'json',data:{action:'load-more-news',page:page,author:author,cat:cat,post__not_in:post__not_in,},beforeSend:function(){$('#new-news').after('<div class="signal-loading"></div>')},success:function(data){$('.signal-loading').remove();if(data.has_more_pages){jQuery('#hp-load-news').data('page',parseInt(page)+1);jQuery('.load-more').show()}
jQuery('#new-news').append(data.res)},error:function(errorThrown){console.log(errorThrown)}})})});function isElementExist(_el,_cb){var elem=document.querySelector(_el);if(document.body.contains(elem)){try{_cb()}catch(e){console.log(e)}}}
function initSmartMenu(){var distanceBetweenMenuAndNav=jQuery(".header").offset().top+jQuery(".header").innerHeight()-jQuery(".nav").offset().top-jQuery(".nav").innerHeight();jQuery(".header-menu").smartmenus({collapsibleBehavior:"accordion",mainMenuSubOffsetY:distanceBetweenMenuAndNav});jQuery('.header-menu').children().last().addClass('nav-sm-reverse');jQuery("body").mobileNav({menuActiveClass:"nav-active",menuOpener:".nav-opener",hideOnClickOutside:!0,menuDrop:".nav-drop"}),"ontouchstart" in document.documentElement||jQuery(window).on("resize orientationchange",function(){jQuery("body").removeClass("nav-active"),$.SmartMenus.hideAll()})}
function initHeaderHeight(){let win=jQuery(window),wrapper=jQuery('.wrapper'),header=jQuery('.header'),headerHeight=header.outerHeight();wrapper.css('padding-top',headerHeight);win.on('load scroll resize orientationchange',function(){headerHeight=header.outerHeight();wrapper.css('padding-top',headerHeight)})}
function initAddClasses(){jQuery('.nav-search').each(function(){const $menu=$(this);const $opener=$(this).find('.nav-search_opener');$(document).mouseup(e=>{if(!$menu.is(e.target)&&$menu.has(e.target).length===0){$menu.removeClass('active')}});$opener.on('click',()=>{$menu.toggleClass('active')});$('.nav-search_close').on('click',()=>{$menu.removeClass('active')})})}
function initCustomForms(){jcf.setOptions("Select",{wrapNative:!1,fakeDropInBody:!0,});jcf.replaceAll()}
function initAOS(){var body=jQuery('body');AOS.init({easing:'ease-out',duration:500,once:!0})}
function initButtonAnim(){jQuery('.btn').each(function(){const $btn=$(this);$btn.on('mouseenter',function(){$btn.addClass('hover');$btn.removeClass('leave')});$btn.on('mouseleave',function(){setTimeout(function(){$btn.removeClass('hover');$btn.addClass('leave')},250);setTimeout(function(){$btn.removeClass('leave')},500)})})}
function initAnimation(){var hero=document.querySelectorAll(".hero")
hero.forEach((section)=>{var bgImage=section.querySelector(".bg-img img"),bgOverlay=section.querySelector(".bg-img-overlay"),text=section.querySelector("h1"),controller=new ScrollMagic.Controller(),animTL=new TimelineMax();animTL.to(bgOverlay,.85,{top:'100%',},'0.5');animTL.to(bgImage,.85,{scale:1,},'-=0.8');animTL.staggerFromTo(text,.85,{autoAlpha:0,y:30,},{autoAlpha:1,y:0,},0.2);new ScrollMagic.Scene({triggerElement:section,}).setTween(animTL).addTo(controller).reverse(!1)});var barSlider=document.querySelectorAll(".bar-slider")
barSlider.forEach((section)=>{if(window.matchMedia('(min-width: 1024px)').matches===!0){var itemsWrap=barSlider,item=section.querySelectorAll(".swiper-slide"),controller=new ScrollMagic.Controller(),animTL=new TimelineMax();animTL.from(itemsWrap,.85,{x:'-100%',});animTL.to(itemsWrap,0,{x:0,});animTL.staggerFromTo(item,.85,{autoAlpha:0,x:-30,},{autoAlpha:1,x:0,},0.2);new ScrollMagic.Scene({triggerElement:screenTop,}).setTween(animTL).addTo(controller).reverse(!1)}});var heroAlt=document.querySelectorAll(".hero-alt")
heroAlt.forEach((section)=>{var bgImage=section.querySelector(".bg-img img"),bgOverlay=section.querySelector(".bg-img-overlay"),text=section.querySelectorAll(".animate-item"),controller=new ScrollMagic.Controller(),animTL=new TimelineMax();animTL.to(bgOverlay,.85,{top:'100%',},'-=0.5');animTL.to(bgImage,.85,{scale:1,},'-=0.5');animTL.staggerFromTo(text,.85,{autoAlpha:0,y:30,},{autoAlpha:1,y:0,},0.2);new ScrollMagic.Scene({triggerElement:section,}).setTween(animTL).addTo(controller).reverse(!1)});var heroInner=document.querySelectorAll(".hero-inner")
heroInner.forEach((section)=>{var bgImage=section.querySelector(".bg-img img"),bgOverlay=section.querySelector(".bg-img-overlay"),text=section.querySelectorAll(".animate-item"),imageBg=section.querySelector(".image-bg"),imageOverlay=section.querySelector(".image-overlay"),image=section.querySelector(".image img"),controller=new ScrollMagic.Controller(),animTL=new TimelineMax();animTL.to(bgOverlay,.85,{top:'100%',},'-=0.5');animTL.to(bgImage,.85,{scale:1,},'-=0.5');animTL.staggerFromTo(text,.85,{autoAlpha:0,y:30,},{autoAlpha:1,y:0,},0.2);animTL.to(imageBg,.5,{right:0,});animTL.to(imageBg,.5,{left:'auto',});animTL.to(image,.85,{x:0,scale:1,autoAlpha:1,},'-=0.5');animTL.to(imageOverlay,.85,{x:0,},'-=0.5');new ScrollMagic.Scene({triggerElement:section,}).setTween(animTL).addTo(controller).reverse(!1)});var articleHero=document.querySelectorAll(".article-hero")
articleHero.forEach((section)=>{var breadcrumb=section.querySelector(".breadcrumb"),heading=section.querySelector("h1"),image=section.querySelector(".image img"),imageOverlay1=section.querySelector(".image-gray-box"),imageOverlay2=section.querySelector(".image-blue-box"),controller=new ScrollMagic.Controller(),animTL=new TimelineMax();animTL.to(imageOverlay1,.5,{x:0,});animTL.to(breadcrumb,.5,{y:0,autoAlpha:1,});animTL.to(image,.5,{y:0,scale:1,autoAlpha:1,});animTL.to(heading,.5,{y:0,autoAlpha:1,});animTL.to(imageOverlay2,.5,{y:0,autoAlpha:1,});new ScrollMagic.Scene({triggerElement:section,}).setTween(animTL).addTo(controller).reverse(!1)});var bioItem=document.querySelectorAll(".bio")
bioItem.forEach((section)=>{var text=section.querySelectorAll(".animation-item"),image=section.querySelector(".bio-image img"),imageOverlay=section.querySelector(".bio-bg"),imageDesc=section.querySelector(".bio-image_desc"),controller=new ScrollMagic.Controller(),animTL=new TimelineMax();animTL.to(imageOverlay,.5,{x:0,});animTL.to(image,.5,{y:0,autoAlpha:1,});animTL.to(imageDesc,.5,{y:0,autoAlpha:1,});animTL.staggerFromTo(text,.5,{autoAlpha:0,y:30,},{autoAlpha:1,y:0,},0.2);new ScrollMagic.Scene({triggerElement:section,}).setTween(animTL).addTo(controller).reverse(!1)});var contactItem=document.querySelectorAll(".contact")
contactItem.forEach((section)=>{var image=section.querySelector(".contact-image img"),formItem=section.querySelectorAll(".form-control"),controller=new ScrollMagic.Controller(),animTL=new TimelineMax();animTL.to(image,.5,{y:0,autoAlpha:1,});animTL.staggerFromTo(formItem,.5,{autoAlpha:0,y:30,},{autoAlpha:1,y:0,},0.2);new ScrollMagic.Scene({triggerElement:section,}).setTween(animTL).addTo(controller).reverse(!1)});var insights=document.querySelectorAll(".insights")
insights.forEach((section)=>{var heading=section.querySelector("h2"),videoOverlay=section.querySelector(".fluid-iframe-overlay"),video=section.querySelector(".fluid-iframe iframe"),videoDesk=section.querySelector(".video-desc"),videoListItem=section.querySelectorAll(".list li"),controller=new ScrollMagic.Controller(),animTL=new TimelineMax();animTL.to(heading,.5,{y:0,autoAlpha:1,});animTL.to(videoOverlay,.5,{right:0,});animTL.to(videoOverlay,.5,{left:'auto',});animTL.to(video,.85,{x:0,scale:1,autoAlpha:1,},'-=0.5');animTL.to(videoDesk,.5,{y:0,autoAlpha:1,});animTL.staggerFromTo(videoListItem,.5,{autoAlpha:0,x:30,},{autoAlpha:1,x:0,},0.2);new ScrollMagic.Scene({triggerElement:section,}).setTween(animTL).addTo(controller).reverse(!1)})}
function initLoadMore(){jQuery('.news-items').each(function(){let $item=$(this).find('.item');let $opener=$(this).find('.btn-load-more');let $amount=$(this).attr("data-amount");$item.hide();$item.slice(0,$amount).show();let $itemsHidden=$(this).find('.item:hidden')});$('#hp-load-news-custom').click(function(e){e.preventDefault();$('.news-items .item:hidden').each(function(index,value){if(index<6){$(this).fadeIn("slow")}})})}
function initSlider(){const breakpoint=window.matchMedia('(min-width: 1024px)');let mySwiper;const breakpointChecker=function(){if(breakpoint.matches===!0){if(mySwiper!==undefined)mySwiper.destroy(!0,!0);return}else if(breakpoint.matches===!1){return enableSwiper()}};const enableSwiper=function(){mySwiper=new Swiper('.bar-slider .swiper-container',{loop:!0,initialSlide:1,slidesPerView:1,centeredSlides:!0,autoplay:{delay:3000,},speed:1500,effect:'fade',fadeEffect:{crossFade:!0},autoHeight:!0,a11y:!1,})}
breakpoint.addListener(breakpointChecker);breakpointChecker()}
function debounce(func,timeout){var timeoutID,timeout=timeout||200;return function(){var scope=this,args=arguments;clearTimeout(timeoutID);timeoutID=setTimeout(function(){func.apply(scope,Array.prototype.slice.call(args))},timeout)}}(function($){function MobileNav(options){this.options=$.extend({container:null,hideOnClickOutside:!1,menuActiveClass:"nav-active",menuOpener:".nav-opener",menuDrop:".nav-drop",toggleEvent:"click",outsideClickEvent:"click touchstart pointerdown MSPointerDown"},options);this.initStructure();this.attachEvents()}
MobileNav.prototype={initStructure:function(){this.page=$("html");this.container=$(this.options.container);this.opener=this.container.find(this.options.menuOpener);this.drop=this.container.find(this.options.menuDrop)},attachEvents:function(){var self=this;if(activateResizeHandler){activateResizeHandler();activateResizeHandler=null}
this.outsideClickHandler=function(e){if(self.isOpened()){var target=$(e.target);if(!target.closest(self.opener).length&&!target.closest(self.drop).length){self.hide()}}};this.openerClickHandler=function(e){e.preventDefault();self.toggle()};this.opener.on(this.options.toggleEvent,this.openerClickHandler)},isOpened:function(){return this.container.hasClass(this.options.menuActiveClass)},show:function(){this.container.addClass(this.options.menuActiveClass);if(this.options.hideOnClickOutside){this.page.on(this.options.outsideClickEvent,this.outsideClickHandler)}},hide:function(){this.container.removeClass(this.options.menuActiveClass);if(this.options.hideOnClickOutside){this.page.off(this.options.outsideClickEvent,this.outsideClickHandler)}},toggle:function(){if(this.isOpened()){this.hide()}else{this.show()}},destroy:function(){this.container.removeClass(this.options.menuActiveClass);this.opener.off(this.options.toggleEvent,this.clickHandler);this.page.off(this.options.outsideClickEvent,this.outsideClickHandler)}};var activateResizeHandler=function(){var win=$(window),doc=$("html"),resizeClass="resize-active",flag,timer;var removeClassHandler=function(){flag=!1;doc.removeClass(resizeClass)};var resizeHandler=function(){if(!flag){flag=!0;doc.addClass(resizeClass)}
clearTimeout(timer);timer=setTimeout(removeClassHandler,500)};win.on("resize orientationchange",resizeHandler)};$.fn.mobileNav=function(opt){var args=Array.prototype.slice.call(arguments);var method=args[0];return this.each(function(){var $container=jQuery(this);var instance=$container.data("MobileNav");if(typeof opt==="object"||typeof opt==="undefined"){$container.data("MobileNav",new MobileNav($.extend({container:this},opt)))}else if(typeof method==="string"&&instance){if(typeof instance[method]==="function"){args.shift();instance[method].apply(instance,args)}}})}})(jQuery);(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else if(typeof module==="object"&&typeof module.exports==="object"){module.exports=factory(require("jquery"))}else{factory(jQuery)}})(function($){var menuTrees=[],mouse=!1,touchEvents="ontouchstart" in window,mouseDetectionEnabled=!1,requestAnimationFrame=window.requestAnimationFrame||function(callback){return setTimeout(callback,1000/60)},cancelAnimationFrame=window.cancelAnimationFrame||function(id){clearTimeout(id)},canAnimate=!!$.fn.animate;function initMouseDetection(disable){var eNS=".smartmenus_mouse";if(!mouseDetectionEnabled&&!disable){var firstTime=!0,lastMove=null,events={mousemove:function(e){var thisMove={x:e.pageX,y:e.pageY,timeStamp:new Date().getTime()};if(lastMove){var deltaX=Math.abs(lastMove.x-thisMove.x),deltaY=Math.abs(lastMove.y-thisMove.y);if((deltaX>0||deltaY>0)&&deltaX<=2&&deltaY<=2&&thisMove.timeStamp-lastMove.timeStamp<=300){mouse=!0;if(firstTime){var $a=$(e.target).closest("a");if($a.is("a")){$.each(menuTrees,function(){if($.contains(this.$root[0],$a[0])){this.itemEnter({currentTarget:$a[0]});return!1}})}
firstTime=!1}}}
lastMove=thisMove}};events[touchEvents?"touchstart":"pointerover pointermove pointerout MSPointerOver MSPointerMove MSPointerOut"]=function(e){if(isTouchEvent(e.originalEvent)){mouse=!1}};$(document).on(getEventsNS(events,eNS));mouseDetectionEnabled=!0}else if(mouseDetectionEnabled&&disable){$(document).off(eNS);mouseDetectionEnabled=!1}}
function isTouchEvent(e){return!/^(4|mouse)$/.test(e.pointerType)}
function getEventsNS(events,eNS){if(!eNS){eNS=""}
var eventsNS={};for(var i in events){eventsNS[i.split(" ").join(eNS+" ")+eNS]=events[i]}
return eventsNS}
$.SmartMenus=function(elm,options){this.$root=$(elm);this.opts=options;this.rootId="";this.accessIdPrefix="";this.$subArrow=null;this.activatedItems=[];this.visibleSubMenus=[];this.showTimeout=0;this.hideTimeout=0;this.scrollTimeout=0;this.clickActivated=!1;this.focusActivated=!1;this.zIndexInc=0;this.idInc=0;this.$firstLink=null;this.$firstSub=null;this.disabled=!1;this.$disableOverlay=null;this.$touchScrollingSub=null;this.cssTransforms3d="perspective" in elm.style||"webkitPerspective" in elm.style;this.wasCollapsible=!1;this.init()};$.extend($.SmartMenus,{hideAll:function(){$.each(menuTrees,function(){this.menuHideAll()})},destroy:function(){while(menuTrees.length){menuTrees[0].destroy()}
initMouseDetection(!0)},prototype:{init:function(refresh){var self=this;if(!refresh){menuTrees.push(this);this.rootId=(new Date().getTime()+Math.random()+"").replace(/\D/g,"");this.accessIdPrefix="sm-"+this.rootId+"-";if(this.$root.hasClass("sm-rtl")){this.opts.rightToLeftSubMenus=!0}
var eNS=".smartmenus";this.$root.data("smartmenus",this).attr("data-smartmenus-id",this.rootId).dataSM("level",1).on(getEventsNS({"mouseover focusin":$.proxy(this.rootOver,this),"mouseout focusout":$.proxy(this.rootOut,this),keydown:$.proxy(this.rootKeyDown,this)},eNS)).on(getEventsNS({mouseenter:$.proxy(this.itemEnter,this),mouseleave:$.proxy(this.itemLeave,this),mousedown:$.proxy(this.itemDown,this),focus:$.proxy(this.itemFocus,this),blur:$.proxy(this.itemBlur,this),click:$.proxy(this.itemClick,this)},eNS),"a");eNS+=this.rootId;if(this.opts.hideOnClick){$(document).on(getEventsNS({touchstart:$.proxy(this.docTouchStart,this),touchmove:$.proxy(this.docTouchMove,this),touchend:$.proxy(this.docTouchEnd,this),click:$.proxy(this.docClick,this)},eNS))}
$(window).on(getEventsNS({"resize orientationchange":$.proxy(this.winResize,this)},eNS));if(this.opts.subIndicators){this.$subArrow=$("<span/>").addClass("sub-arrow");if(this.opts.subIndicatorsText){this.$subArrow.html(this.opts.subIndicatorsText)}}
initMouseDetection()}
this.$firstSub=this.$root.find("ul").each(function(){self.menuInit($(this))}).eq(0);this.$firstLink=this.$root.find("a").eq(0);if(this.opts.markCurrentItem){var reDefaultDoc=/(index|default)\.[^#\?\/]*/i,reHash=/#.*/,locHref=window.location.href.replace(reDefaultDoc,""),locHrefNoHash=locHref.replace(reHash,"");this.$root.find("a:not(.mega-menu a)").each(function(){var href=this.href.replace(reDefaultDoc,""),$this=$(this);if(href==locHref||href==locHrefNoHash){$this.addClass("current");if(self.opts.markCurrentTree){$this.parentsUntil("[data-smartmenus-id]","ul").each(function(){$(this).dataSM("parent-a").addClass("current")})}}})}
this.wasCollapsible=this.isCollapsible()},destroy:function(refresh){if(!refresh){var eNS=".smartmenus";this.$root.removeData("smartmenus").removeAttr("data-smartmenus-id").removeDataSM("level").off(eNS);eNS+=this.rootId;$(document).off(eNS);$(window).off(eNS);if(this.opts.subIndicators){this.$subArrow=null}}
this.menuHideAll();var self=this;this.$root.find("ul").each(function(){var $this=$(this);if($this.dataSM("scroll-arrows")){$this.dataSM("scroll-arrows").remove()}
if($this.dataSM("shown-before")){if(self.opts.subMenusMinWidth||self.opts.subMenusMaxWidth){$this.css({width:"",minWidth:"",maxWidth:""}).removeClass("sm-nowrap")}
if($this.dataSM("scroll-arrows")){$this.dataSM("scroll-arrows").remove()}
$this.css({zIndex:"",top:"",left:"",marginLeft:"",marginTop:"",display:""})}
if(($this.attr("id")||"").indexOf(self.accessIdPrefix)==0){$this.removeAttr("id")}}).removeDataSM("in-mega").removeDataSM("shown-before").removeDataSM("scroll-arrows").removeDataSM("parent-a").removeDataSM("level").removeDataSM("beforefirstshowfired").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeAttr("aria-expanded");this.$root.find("a.has-submenu").each(function(){var $this=$(this);if($this.attr("id").indexOf(self.accessIdPrefix)==0){$this.removeAttr("id")}}).removeClass("has-submenu").removeDataSM("sub").removeAttr("aria-haspopup").removeAttr("aria-controls").removeAttr("aria-expanded").closest("li").removeDataSM("sub");if(this.opts.subIndicators){this.$root.find("span.sub-arrow").remove()}
if(this.opts.markCurrentItem){this.$root.find("a.current").removeClass("current")}
if(!refresh){this.$root=null;this.$firstLink=null;this.$firstSub=null;if(this.$disableOverlay){this.$disableOverlay.remove();this.$disableOverlay=null}
menuTrees.splice($.inArray(this,menuTrees),1)}},disable:function(noOverlay){if(!this.disabled){this.menuHideAll();if(!noOverlay&&!this.opts.isPopup&&this.$root.is(":visible")){var pos=this.$root.offset();this.$disableOverlay=$('<div class="sm-jquery-disable-overlay"/>').css({position:"absolute",top:pos.top,left:pos.left,width:this.$root.outerWidth(),height:this.$root.outerHeight(),zIndex:this.getStartZIndex(!0),opacity:0}).appendTo(document.body)}
this.disabled=!0}},docClick:function(e){if(this.$touchScrollingSub){this.$touchScrollingSub=null;return}
if((this.visibleSubMenus.length&&!$.contains(this.$root[0],e.target))||$(e.target).closest("a").length){this.menuHideAll()}},docTouchEnd:function(e){if(!this.lastTouch){return}
if(this.visibleSubMenus.length&&(this.lastTouch.x2===undefined||this.lastTouch.x1==this.lastTouch.x2)&&(this.lastTouch.y2===undefined||this.lastTouch.y1==this.lastTouch.y2)&&(!this.lastTouch.target||!$.contains(this.$root[0],this.lastTouch.target))){if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}
var self=this;this.hideTimeout=setTimeout(function(){self.menuHideAll()},350)}
this.lastTouch=null},docTouchMove:function(e){if(!this.lastTouch){return}
var touchPoint=e.originalEvent.touches[0];this.lastTouch.x2=touchPoint.pageX;this.lastTouch.y2=touchPoint.pageY},docTouchStart:function(e){var touchPoint=e.originalEvent.touches[0];this.lastTouch={x1:touchPoint.pageX,y1:touchPoint.pageY,target:touchPoint.target}},enable:function(){if(this.disabled){if(this.$disableOverlay){this.$disableOverlay.remove();this.$disableOverlay=null}
this.disabled=!1}},getClosestMenu:function(elm){var $closestMenu=$(elm).closest("ul");while($closestMenu.dataSM("in-mega")){$closestMenu=$closestMenu.parent().closest("ul")}
return $closestMenu[0]||null},getHeight:function($elm){return this.getOffset($elm,!0)},getOffset:function($elm,height){var old;if($elm.css("display")=="none"){old={position:$elm[0].style.position,visibility:$elm[0].style.visibility};$elm.css({position:"absolute",visibility:"hidden"}).show()}
var box=$elm[0].getBoundingClientRect&&$elm[0].getBoundingClientRect(),val=box&&(height?box.height||box.bottom-box.top:box.width||box.right-box.left);if(!val&&val!==0){val=height?$elm[0].offsetHeight:$elm[0].offsetWidth}
if(old){$elm.hide().css(old)}
return val},getStartZIndex:function(root){var zIndex=parseInt(this[root?"$root":"$firstSub"].css("z-index"));if(!root&&isNaN(zIndex)){zIndex=parseInt(this.$root.css("z-index"))}
return!isNaN(zIndex)?zIndex:1},getTouchPoint:function(e){return((e.touches&&e.touches[0])||(e.changedTouches&&e.changedTouches[0])||e)},getViewport:function(height){var name=height?"Height":"Width",val=document.documentElement["client"+name],val2=window["inner"+name];if(val2){val=Math.min(val,val2)}
return val},getViewportHeight:function(){return this.getViewport(!0)},getViewportWidth:function(){return this.getViewport()},getWidth:function($elm){return this.getOffset($elm)},handleEvents:function(){return!this.disabled&&this.isCSSOn()},handleItemEvents:function($a){return this.handleEvents()&&!this.isLinkInMegaMenu($a)},isCollapsible:function(){return this.$firstSub.css("position")=="static"},isCSSOn:function(){return this.$firstLink.css("display")!="inline"},isFixed:function(){var isFixed=this.$root.css("position")=="fixed";if(!isFixed){this.$root.parentsUntil("body").each(function(){if($(this).css("position")=="fixed"){isFixed=!0;return!1}})}
return isFixed},isLinkInMegaMenu:function($a){return $(this.getClosestMenu($a[0])).hasClass("mega-menu")},isTouchMode:function(){return!mouse||this.opts.noMouseOver||this.isCollapsible()},itemActivate:function($a,hideDeeperSubs){var $ul=$a.closest("ul"),level=$ul.dataSM("level");if(level>1&&(!this.activatedItems[level-2]||this.activatedItems[level-2][0]!=$ul.dataSM("parent-a")[0])){var self=this;$($ul.parentsUntil("[data-smartmenus-id]","ul").get().reverse()).add($ul).each(function(){self.itemActivate($(this).dataSM("parent-a"))})}
if(!this.isCollapsible()||hideDeeperSubs){this.menuHideSubMenus(!this.activatedItems[level-1]||this.activatedItems[level-1][0]!=$a[0]?level-1:level)}
this.activatedItems[level-1]=$a;if(this.$root.triggerHandler("activate.smapi",$a[0])===!1){return}
var $sub=$a.dataSM("sub");if($sub&&(this.isTouchMode()||!this.opts.showOnClick||this.clickActivated)){this.menuShow($sub)}},itemBlur:function(e){var $a=$(e.currentTarget);if(!this.handleItemEvents($a)){return}
this.$root.triggerHandler("blur.smapi",$a[0])},itemClick:function(e){var $a=$(e.currentTarget);if(!this.handleItemEvents($a)){return}
if(this.$touchScrollingSub&&this.$touchScrollingSub[0]==$a.closest("ul")[0]){this.$touchScrollingSub=null;e.stopPropagation();return!1}
if(this.$root.triggerHandler("click.smapi",$a[0])===!1){return!1}
var $sub=$a.dataSM("sub"),firstLevelSub=$sub?$sub.dataSM("level")==2:!1;if($sub){var subArrowClicked=$(e.target).is(".sub-arrow"),collapsible=this.isCollapsible(),behaviorToggle=/toggle$/.test(this.opts.collapsibleBehavior),behaviorLink=/link$/.test(this.opts.collapsibleBehavior),behaviorAccordion=/^accordion/.test(this.opts.collapsibleBehavior);if(!$sub.is(":visible")){if(!behaviorLink||!collapsible||subArrowClicked){if(this.opts.showOnClick&&firstLevelSub){this.clickActivated=!0}
this.itemActivate($a,behaviorAccordion);if($sub.is(":visible")){this.focusActivated=!0;return!1}}}else if(collapsible&&(behaviorToggle||subArrowClicked)){this.itemActivate($a,behaviorAccordion);this.menuHide($sub);if(behaviorToggle){this.focusActivated=!1}
return!1}}
if((this.opts.showOnClick&&firstLevelSub)||$a.hasClass("disabled")||this.$root.triggerHandler("select.smapi",$a[0])===!1){return!1}},itemDown:function(e){var $a=$(e.currentTarget);if(!this.handleItemEvents($a)){return}
$a.dataSM("mousedown",!0)},itemEnter:function(e){var $a=$(e.currentTarget);if(!this.handleItemEvents($a)){return}
if(!this.isTouchMode()){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=0}
var self=this;this.showTimeout=setTimeout(function(){self.itemActivate($a)},this.opts.showOnClick&&$a.closest("ul").dataSM("level")==1?1:this.opts.showTimeout)}
this.$root.triggerHandler("mouseenter.smapi",$a[0])},itemFocus:function(e){var $a=$(e.currentTarget);if(!this.handleItemEvents($a)){return}
if(this.focusActivated&&(!this.isTouchMode()||!$a.dataSM("mousedown"))&&(!this.activatedItems.length||this.activatedItems[this.activatedItems.length-1][0]!=$a[0])){this.itemActivate($a,!0)}
this.$root.triggerHandler("focus.smapi",$a[0])},itemLeave:function(e){var $a=$(e.currentTarget);if(!this.handleItemEvents($a)){return}
if(!this.isTouchMode()){$a[0].blur();if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=0}}
$a.removeDataSM("mousedown");this.$root.triggerHandler("mouseleave.smapi",$a[0])},menuHide:function($sub){if(this.$root.triggerHandler("beforehide.smapi",$sub[0])===!1){return}
if(canAnimate){$sub.stop(!0,!0)}
if($sub.css("display")!="none"){var complete=function(){$sub.css("z-index","")};if(this.isCollapsible()){if(canAnimate&&this.opts.collapsibleHideFunction){this.opts.collapsibleHideFunction.call(this,$sub,complete)}else{$sub.hide(this.opts.collapsibleHideDuration,complete)}}else{if(canAnimate&&this.opts.hideFunction){this.opts.hideFunction.call(this,$sub,complete)}else{$sub.hide(this.opts.hideDuration,complete)}}
if($sub.dataSM("scroll")){this.menuScrollStop($sub);$sub.css({"touch-action":"","-ms-touch-action":"","-webkit-transform":"",transform:""}).off(".smartmenus_scroll").removeDataSM("scroll").dataSM("scroll-arrows").hide()}
$sub.dataSM("parent-a").removeClass("highlighted").attr("aria-expanded","false");$sub.attr({"aria-expanded":"false","aria-hidden":"true"});var level=$sub.dataSM("level");this.activatedItems.splice(level-1,1);this.visibleSubMenus.splice($.inArray($sub,this.visibleSubMenus),1);this.$root.triggerHandler("hide.smapi",$sub[0])}},menuHideAll:function(){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=0}
var level=this.opts.isPopup?1:0;for(var i=this.visibleSubMenus.length-1;i>=level;i--){this.menuHide(this.visibleSubMenus[i])}
if(this.opts.isPopup){if(canAnimate){this.$root.stop(!0,!0)}
if(this.$root.is(":visible")){if(canAnimate&&this.opts.hideFunction){this.opts.hideFunction.call(this,this.$root)}else{this.$root.hide(this.opts.hideDuration)}}}
this.activatedItems=[];this.visibleSubMenus=[];this.clickActivated=!1;this.focusActivated=!1;this.zIndexInc=0;this.$root.triggerHandler("hideAll.smapi")},menuHideSubMenus:function(level){for(var i=this.activatedItems.length-1;i>=level;i--){var $sub=this.activatedItems[i].dataSM("sub");if($sub){this.menuHide($sub)}}},menuInit:function($ul){if(!$ul.dataSM("in-mega")){if($ul.hasClass("mega-menu")){$ul.find("ul").dataSM("in-mega",!0)}
var level=2,par=$ul[0];while((par=par.parentNode.parentNode)!=this.$root[0]){level++}
var $a=$ul.prevAll("a").eq(-1);if(!$a.length){$a=$ul.prevAll().find("a").eq(-1)}
$a.addClass("has-submenu").dataSM("sub",$ul);$ul.dataSM("parent-a",$a).dataSM("level",level).parent().dataSM("sub",$ul);var aId=$a.attr("id")||this.accessIdPrefix+ ++this.idInc,ulId=$ul.attr("id")||this.accessIdPrefix+ ++this.idInc;$a.attr({id:aId,"aria-haspopup":"true","aria-controls":ulId,"aria-expanded":"false"});$ul.attr({id:ulId,role:"group","aria-hidden":"true","aria-labelledby":aId,"aria-expanded":"false"});if(this.opts.subIndicators){$a[this.opts.subIndicatorsPos](this.$subArrow.clone())}}},menuPosition:function($sub){var $a=$sub.dataSM("parent-a"),$li=$a.closest("li"),$ul=$li.parent(),level=$sub.dataSM("level"),subW=this.getWidth($sub),subH=this.getHeight($sub),itemOffset=$a.offset(),itemX=itemOffset.left,itemY=itemOffset.top,itemW=this.getWidth($a),itemH=this.getHeight($a),$win=$(window),winX=$win.scrollLeft(),winY=$win.scrollTop(),winW=this.getViewportWidth(),winH=this.getViewportHeight(),horizontalParent=$ul.parent().is("[data-sm-horizontal-sub]")||(level==2&&!$ul.hasClass("sm-vertical")),rightToLeft=(this.opts.rightToLeftSubMenus&&!$li.is(".nav-sm-reverse"))||(!this.opts.rightToLeftSubMenus&&$li.is(".nav-sm-reverse")),subOffsetX=level==2?this.opts.mainMenuSubOffsetX:this.opts.subMenusSubOffsetX,subOffsetY=level==2?this.opts.mainMenuSubOffsetY:this.opts.subMenusSubOffsetY,x,y;if(horizontalParent){x=rightToLeft?itemW-subW-subOffsetX:subOffsetX;y=this.opts.bottomToTopSubMenus?-subH-subOffsetY:itemH+subOffsetY}else{x=rightToLeft?subOffsetX-subW:itemW-subOffsetX;y=this.opts.bottomToTopSubMenus?itemH-subOffsetY-subH:subOffsetY}
if(this.opts.keepInViewport){var absX=itemX+x,absY=itemY+y;if(rightToLeft&&absX<winX){x=horizontalParent?winX-absX+x:itemW-subOffsetX}else if(!rightToLeft&&absX+subW>winX+winW){x=horizontalParent?winX+winW-subW-absX+x:subOffsetX-subW}
if(!horizontalParent){if(subH<winH&&absY+subH>winY+winH){y+=winY+winH-subH-absY}else if(subH>=winH||absY<winY){y+=winY-absY}}
if((horizontalParent&&(absY+subH>winY+winH+0.49||absY<winY))||(!horizontalParent&&subH>winH+0.49)){var self=this;if(!$sub.dataSM("scroll-arrows")){$sub.dataSM("scroll-arrows",$([$('<span class="scroll-up"><span class="scroll-up-arrow"></span></span>')[0],$('<span class="scroll-down"><span class="scroll-down-arrow"></span></span>')[0]]).on({mouseenter:function(){$sub.dataSM("scroll").up=$(this).hasClass("scroll-up");self.menuScroll($sub)},mouseleave:function(e){self.menuScrollStop($sub);self.menuScrollOut($sub,e)},"mousewheel DOMMouseScroll":function(e){e.preventDefault()}}).insertAfter($sub))}
var eNS=".smartmenus_scroll";$sub.dataSM("scroll",{y:this.cssTransforms3d?0:y-itemH,step:1,itemH:itemH,subH:subH,arrowDownH:this.getHeight($sub.dataSM("scroll-arrows").eq(1))}).on(getEventsNS({mouseover:function(e){self.menuScrollOver($sub,e)},mouseout:function(e){self.menuScrollOut($sub,e)},"mousewheel DOMMouseScroll":function(e){self.menuScrollMousewheel($sub,e)}},eNS)).dataSM("scroll-arrows").css({top:"auto",left:"0",marginLeft:x+(parseInt($sub.css("border-left-width"))||0),width:subW-(parseInt($sub.css("border-left-width"))||0)-(parseInt($sub.css("border-right-width"))||0),zIndex:$sub.css("z-index")}).eq(horizontalParent&&this.opts.bottomToTopSubMenus?0:1).show();if(this.isFixed()){var events={};events[touchEvents?"touchstart touchmove touchend":"pointerdown pointermove pointerup MSPointerDown MSPointerMove MSPointerUp"]=function(e){self.menuScrollTouch($sub,e)};$sub.css({"touch-action":"none","-ms-touch-action":"none"}).on(getEventsNS(events,eNS))}}}
$sub.css({top:"auto",left:"0",marginLeft:x,marginTop:y-itemH})},menuScroll:function($sub,once,step){var data=$sub.dataSM("scroll"),$arrows=$sub.dataSM("scroll-arrows"),end=data.up?data.upEnd:data.downEnd,diff;if(!once&&data.momentum){data.momentum*=0.92;diff=data.momentum;if(diff<0.5){this.menuScrollStop($sub);return}}else{diff=step||(once||!this.opts.scrollAccelerate?this.opts.scrollStep:Math.floor(data.step))}
var level=$sub.dataSM("level");if(this.activatedItems[level-1]&&this.activatedItems[level-1].dataSM("sub")&&this.activatedItems[level-1].dataSM("sub").is(":visible")){this.menuHideSubMenus(level-1)}
data.y=(data.up&&end<=data.y)||(!data.up&&end>=data.y)?data.y:Math.abs(end-data.y)>diff?data.y+(data.up?diff:-diff):end;$sub.css(this.cssTransforms3d?{"-webkit-transform":"translate3d(0, "+data.y+"px, 0)",transform:"translate3d(0, "+data.y+"px, 0)"}:{marginTop:data.y});if(mouse&&((data.up&&data.y>data.downEnd)||(!data.up&&data.y<data.upEnd))){$arrows.eq(data.up?1:0).show()}
if(data.y==end){if(mouse){$arrows.eq(data.up?0:1).hide()}
this.menuScrollStop($sub)}else if(!once){if(this.opts.scrollAccelerate&&data.step<this.opts.scrollStep){data.step+=0.2}
var self=this;this.scrollTimeout=requestAnimationFrame(function(){self.menuScroll($sub)})}},menuScrollMousewheel:function($sub,e){if(this.getClosestMenu(e.target)==$sub[0]){e=e.originalEvent;var up=(e.wheelDelta||-e.detail)>0;if($sub.dataSM("scroll-arrows").eq(up?0:1).is(":visible")){$sub.dataSM("scroll").up=up;this.menuScroll($sub,!0)}}
e.preventDefault()},menuScrollOut:function($sub,e){if(mouse){if(!/^scroll-(up|down)/.test((e.relatedTarget||"").className)&&(($sub[0]!=e.relatedTarget&&!$.contains($sub[0],e.relatedTarget))||this.getClosestMenu(e.relatedTarget)!=$sub[0])){$sub.dataSM("scroll-arrows").css("visibility","hidden")}}},menuScrollOver:function($sub,e){if(mouse){if(!/^scroll-(up|down)/.test(e.target.className)&&this.getClosestMenu(e.target)==$sub[0]){this.menuScrollRefreshData($sub);var data=$sub.dataSM("scroll"),upEnd=$(window).scrollTop()-$sub.dataSM("parent-a").offset().top-data.itemH;$sub.dataSM("scroll-arrows").eq(0).css("margin-top",upEnd).end().eq(1).css("margin-top",upEnd+this.getViewportHeight()-data.arrowDownH).end().css("visibility","visible")}}},menuScrollRefreshData:function($sub){var data=$sub.dataSM("scroll"),upEnd=$(window).scrollTop()-$sub.dataSM("parent-a").offset().top-data.itemH;if(this.cssTransforms3d){upEnd=-(parseFloat($sub.css("margin-top"))-upEnd)}
$.extend(data,{upEnd:upEnd,downEnd:upEnd+this.getViewportHeight()-data.subH})},menuScrollStop:function($sub){if(this.scrollTimeout){cancelAnimationFrame(this.scrollTimeout);this.scrollTimeout=0;$sub.dataSM("scroll").step=1;return!0}},menuScrollTouch:function($sub,e){e=e.originalEvent;if(isTouchEvent(e)){var touchPoint=this.getTouchPoint(e);if(this.getClosestMenu(touchPoint.target)==$sub[0]){var data=$sub.dataSM("scroll");if(/(start|down)$/i.test(e.type)){if(this.menuScrollStop($sub)){e.preventDefault();this.$touchScrollingSub=$sub}else{this.$touchScrollingSub=null}
this.menuScrollRefreshData($sub);$.extend(data,{touchStartY:touchPoint.pageY,touchStartTime:e.timeStamp})}else if(/move$/i.test(e.type)){var prevY=data.touchY!==undefined?data.touchY:data.touchStartY;if(prevY!==undefined&&prevY!=touchPoint.pageY){this.$touchScrollingSub=$sub;var up=prevY<touchPoint.pageY;if(data.up!==undefined&&data.up!=up){$.extend(data,{touchStartY:touchPoint.pageY,touchStartTime:e.timeStamp})}
$.extend(data,{up:up,touchY:touchPoint.pageY});this.menuScroll($sub,!0,Math.abs(touchPoint.pageY-prevY))}
e.preventDefault()}else{if(data.touchY!==undefined){if((data.momentum=Math.pow(Math.abs(touchPoint.pageY-data.touchStartY)/(e.timeStamp-data.touchStartTime),2)*15)){this.menuScrollStop($sub);this.menuScroll($sub);e.preventDefault()}
delete data.touchY}}}}},menuShow:function($sub){if(!$sub.dataSM("beforefirstshowfired")){$sub.dataSM("beforefirstshowfired",!0);if(this.$root.triggerHandler("beforefirstshow.smapi",$sub[0])===!1){return}}
if(this.$root.triggerHandler("beforeshow.smapi",$sub[0])===!1){return}
$sub.dataSM("shown-before",!0);if(canAnimate){$sub.stop(!0,!0)}
if(!$sub.is(":visible")){var $a=$sub.dataSM("parent-a"),collapsible=this.isCollapsible();if(this.opts.keepHighlighted||collapsible){$a.addClass("highlighted")}
if(collapsible){$sub.removeClass("sm-nowrap").css({zIndex:"",width:"auto",minWidth:"",maxWidth:"",top:"",left:"",marginLeft:"",marginTop:""})}else{$sub.css("z-index",(this.zIndexInc=(this.zIndexInc||this.getStartZIndex())+1));if(this.opts.subMenusMinWidth||this.opts.subMenusMaxWidth){$sub.css({width:"auto",minWidth:"",maxWidth:""}).addClass("sm-nowrap");if(this.opts.subMenusMinWidth){$sub.css("min-width",this.opts.subMenusMinWidth)}
if(this.opts.subMenusMaxWidth){var noMaxWidth=this.getWidth($sub);$sub.css("max-width",this.opts.subMenusMaxWidth);if(noMaxWidth>this.getWidth($sub)){$sub.removeClass("sm-nowrap").css("width",this.opts.subMenusMaxWidth)}}}
this.menuPosition($sub)}
var complete=function(){$sub.css("overflow","")};if(collapsible){if(canAnimate&&this.opts.collapsibleShowFunction){this.opts.collapsibleShowFunction.call(this,$sub,complete)}else{$sub.show(this.opts.collapsibleShowDuration,complete)}}else{if(canAnimate&&this.opts.showFunction){this.opts.showFunction.call(this,$sub,complete)}else{$sub.show(this.opts.showDuration,complete)}}
$a.attr("aria-expanded","true");$sub.attr({"aria-expanded":"true","aria-hidden":"false"});this.visibleSubMenus.push($sub);this.$root.triggerHandler("show.smapi",$sub[0])}},popupHide:function(noHideTimeout){if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}
var self=this;this.hideTimeout=setTimeout(function(){self.menuHideAll()},noHideTimeout?1:this.opts.hideTimeout)},popupShow:function(left,top){if(!this.opts.isPopup){alert('SmartMenus jQuery Error:\n\nIf you want to show this menu via the "popupShow" method, set the isPopup:true option.');return}
if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}
this.$root.dataSM("shown-before",!0);if(canAnimate){this.$root.stop(!0,!0)}
if(!this.$root.is(":visible")){this.$root.css({left:left,top:top});var self=this,complete=function(){self.$root.css("overflow","")};if(canAnimate&&this.opts.showFunction){this.opts.showFunction.call(this,this.$root,complete)}else{this.$root.show(this.opts.showDuration,complete)}
this.visibleSubMenus[0]=this.$root}},refresh:function(){this.destroy(!0);this.init(!0)},rootKeyDown:function(e){if(!this.handleEvents()){return}
switch(e.keyCode){case 27:var $activeTopItem=this.activatedItems[0];if($activeTopItem){this.menuHideAll();$activeTopItem[0].focus();var $sub=$activeTopItem.dataSM("sub");if($sub){this.menuHide($sub)}}
break;case 32:var $target=$(e.target);if($target.is("a")&&this.handleItemEvents($target)){var $sub=$target.dataSM("sub");if($sub&&!$sub.is(":visible")){this.itemClick({currentTarget:e.target});e.preventDefault()}}
break}},rootOut:function(e){if(!this.handleEvents()||this.isTouchMode()||e.target==this.$root[0]){return}
if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}
if(!this.opts.showOnClick||!this.opts.hideOnClick){var self=this;this.hideTimeout=setTimeout(function(){self.menuHideAll()},this.opts.hideTimeout)}},rootOver:function(e){if(!this.handleEvents()||this.isTouchMode()||e.target==this.$root[0]){return}
if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}},winResize:function(e){if(!this.handleEvents()){if(this.$disableOverlay){var pos=this.$root.offset();this.$disableOverlay.css({top:pos.top,left:pos.left,width:this.$root.outerWidth(),height:this.$root.outerHeight()})}
return}
if(!("onorientationchange" in window)||e.type=="orientationchange"){var collapsible=this.isCollapsible();if(!(this.wasCollapsible&&collapsible)){if(this.activatedItems.length){this.activatedItems[this.activatedItems.length-1][0].blur()}
this.menuHideAll()}
this.wasCollapsible=collapsible}}}});$.fn.dataSM=function(key,val){if(val){return this.data(key+"_smartmenus",val)}
return this.data(key+"_smartmenus")};$.fn.removeDataSM=function(key){return this.removeData(key+"_smartmenus")};$.fn.smartmenus=function(options){if(typeof options=="string"){var args=arguments,method=options;Array.prototype.shift.call(args);return this.each(function(){var smartmenus=$(this).data("smartmenus");if(smartmenus&&smartmenus[method]){smartmenus[method].apply(smartmenus,args)}})}
return this.each(function(){var dataOpts=$(this).data("sm-options")||null;if(dataOpts){try{dataOpts=eval("("+dataOpts+")")}catch(e){dataOpts=null;alert('ERROR\n\nSmartMenus jQuery init:\nInvalid "data-sm-options" attribute value syntax.')}}
new $.SmartMenus(this,$.extend({},$.fn.smartmenus.defaults,options,dataOpts))})};$.fn.smartmenus.defaults={isPopup:!1,mainMenuSubOffsetX:0,mainMenuSubOffsetY:0,subMenusSubOffsetX:0,subMenusSubOffsetY:0,subMenusMinWidth:"10em",subMenusMaxWidth:"20em",subIndicators:!0,subIndicatorsPos:"append",subIndicatorsText:"",scrollStep:30,scrollAccelerate:!0,showTimeout:250,hideTimeout:500,showDuration:0,showFunction:null,hideDuration:0,hideFunction:function($ul,complete){$ul.fadeOut(200,complete)},collapsibleShowDuration:0,collapsibleShowFunction:function($ul,complete){$ul.slideDown(200,complete)},collapsibleHideDuration:0,collapsibleHideFunction:function($ul,complete){$ul.slideUp(200,complete)},showOnClick:!1,hideOnClick:!0,noMouseOver:!1,keepInViewport:!0,keepHighlighted:!0,markCurrentItem:!1,markCurrentTree:!0,rightToLeftSubMenus:!1,bottomToTopSubMenus:!1,collapsibleBehavior:"default"};return $});
/*!
 * JavaScript Custom Forms
 *
 * Copyright 2014-2016 PSD2HTML - http://psd2html.com/jcf
 * Released under the MIT license (LICENSE.txt)
 *
 * Version: 1.2.3
 */
;(function(root,factory){'use strict';if(typeof define==='function'&&define.amd){define(['jquery'],factory)}else if(typeof exports==='object'){module.exports=factory(require('jquery'))}else{root.jcf=factory(jQuery)}}(this,function($){'use strict';var version='1.2.3';var customInstances=[];var commonOptions={optionsKey:'jcf',dataKey:'jcf-instance',rtlClass:'jcf-rtl',focusClass:'jcf-focus',pressedClass:'jcf-pressed',disabledClass:'jcf-disabled',hiddenClass:'jcf-hidden',resetAppearanceClass:'jcf-reset-appearance',unselectableClass:'jcf-unselectable'};var isTouchDevice=('ontouchstart' in window)||window.DocumentTouch&&document instanceof window.DocumentTouch,isWinPhoneDevice=/Windows Phone/.test(navigator.userAgent);commonOptions.isMobileDevice=!!(isTouchDevice||isWinPhoneDevice);var createStyleSheet=function(){var styleTag=$('<style>').appendTo('head'),styleSheet=styleTag.prop('sheet')||styleTag.prop('styleSheet');var addCSSRule=function(selector,rules,index){index=index||0;if(styleSheet.insertRule){styleSheet.insertRule(selector+'{'+rules+'}',index)}else{styleSheet.addRule(selector,rules,index)}};addCSSRule('.'+commonOptions.hiddenClass,'position:absolute !important;left:-9999px !important;height:1px !important;width:1px !important;margin:0 !important;border-width:0 !important;-webkit-appearance:none;-moz-appearance:none;appearance:none');addCSSRule('.'+commonOptions.rtlClass+' .'+commonOptions.hiddenClass,'right:-9999px !important; left: auto !important');addCSSRule('.'+commonOptions.unselectableClass,'-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0);');addCSSRule('.'+commonOptions.resetAppearanceClass,'background: none; border: none; -webkit-appearance: none; appearance: none; opacity: 0; filter: alpha(opacity=0);');var html=$('html'),body=$('body');if(html.css('direction')==='rtl'||body.css('direction')==='rtl'){html.addClass(commonOptions.rtlClass)}
html.on('reset',function(){setTimeout(function(){api.refreshAll()},0)});commonOptions.styleSheetCreated=!0};(function(){var pointerEventsSupported=navigator.pointerEnabled||navigator.msPointerEnabled,touchEventsSupported=('ontouchstart' in window)||window.DocumentTouch&&document instanceof window.DocumentTouch,eventList,eventMap={},eventPrefix='jcf-';if(pointerEventsSupported){eventList={pointerover:navigator.pointerEnabled?'pointerover':'MSPointerOver',pointerdown:navigator.pointerEnabled?'pointerdown':'MSPointerDown',pointermove:navigator.pointerEnabled?'pointermove':'MSPointerMove',pointerup:navigator.pointerEnabled?'pointerup':'MSPointerUp'}}else{eventList={pointerover:'mouseover',pointerdown:'mousedown'+(touchEventsSupported?' touchstart':''),pointermove:'mousemove'+(touchEventsSupported?' touchmove':''),pointerup:'mouseup'+(touchEventsSupported?' touchend':'')}}
$.each(eventList,function(targetEventName,fakeEventList){$.each(fakeEventList.split(' '),function(index,fakeEventName){eventMap[fakeEventName]=targetEventName})});$.each(eventList,function(eventName,eventHandlers){eventHandlers=eventHandlers.split(' ');$.event.special[eventPrefix+eventName]={setup:function(){var self=this;$.each(eventHandlers,function(index,fallbackEvent){if(self.addEventListener)self.addEventListener(fallbackEvent,fixEvent,!1);else self['on'+fallbackEvent]=fixEvent})},teardown:function(){var self=this;$.each(eventHandlers,function(index,fallbackEvent){if(self.addEventListener)self.removeEventListener(fallbackEvent,fixEvent,!1);else self['on'+fallbackEvent]=null})}}});var lastTouch=null;var mouseEventSimulated=function(e){var dx=Math.abs(e.pageX-lastTouch.x),dy=Math.abs(e.pageY-lastTouch.y),rangeDistance=25;if(dx<=rangeDistance&&dy<=rangeDistance){return!0}};var fixEvent=function(e){var origEvent=e||window.event,touchEventData=null,targetEventName=eventMap[origEvent.type];e=$.event.fix(origEvent);e.type=eventPrefix+targetEventName;if(origEvent.pointerType){switch(origEvent.pointerType){case 2:e.pointerType='touch';break;case 3:e.pointerType='pen';break;case 4:e.pointerType='mouse';break;default:e.pointerType=origEvent.pointerType}}else{e.pointerType=origEvent.type.substr(0,5)}
if(!e.pageX&&!e.pageY){touchEventData=origEvent.changedTouches?origEvent.changedTouches[0]:origEvent;e.pageX=touchEventData.pageX;e.pageY=touchEventData.pageY}
if(origEvent.type==='touchend'){lastTouch={x:e.pageX,y:e.pageY}}
if(e.pointerType==='mouse'&&lastTouch&&mouseEventSimulated(e)){return}else{return($.event.dispatch||$.event.handle).call(this,e)}}}());(function(){var wheelEvents=('onwheel' in document||document.documentMode>=9?'wheel':'mousewheel DOMMouseScroll').split(' '),shimEventName='jcf-mousewheel';$.event.special[shimEventName]={setup:function(){var self=this;$.each(wheelEvents,function(index,fallbackEvent){if(self.addEventListener)self.addEventListener(fallbackEvent,fixEvent,!1);else self['on'+fallbackEvent]=fixEvent})},teardown:function(){var self=this;$.each(wheelEvents,function(index,fallbackEvent){if(self.addEventListener)self.removeEventListener(fallbackEvent,fixEvent,!1);else self['on'+fallbackEvent]=null})}};var fixEvent=function(e){var origEvent=e||window.event;e=$.event.fix(origEvent);e.type=shimEventName;if('detail' in origEvent){e.deltaY=-origEvent.detail}
if('wheelDelta' in origEvent){e.deltaY=-origEvent.wheelDelta}
if('wheelDeltaY' in origEvent){e.deltaY=-origEvent.wheelDeltaY}
if('wheelDeltaX' in origEvent){e.deltaX=-origEvent.wheelDeltaX}
if('deltaY' in origEvent){e.deltaY=origEvent.deltaY}
if('deltaX' in origEvent){e.deltaX=origEvent.deltaX}
e.delta=e.deltaY||e.deltaX;if(origEvent.deltaMode===1){var lineHeight=16;e.delta*=lineHeight;e.deltaY*=lineHeight;e.deltaX*=lineHeight}
return($.event.dispatch||$.event.handle).call(this,e)}}());var moduleMixin={fireNativeEvent:function(elements,eventName){$(elements).each(function(){var element=this,eventObject;if(element.dispatchEvent){eventObject=document.createEvent('HTMLEvents');eventObject.initEvent(eventName,!0,!0);element.dispatchEvent(eventObject)}else if(document.createEventObject){eventObject=document.createEventObject();eventObject.target=element;element.fireEvent('on'+eventName,eventObject)}})},bindHandlers:function(){var self=this;$.each(self,function(propName,propValue){if(propName.indexOf('on')===0&&$.isFunction(propValue)){self[propName]=function(){return propValue.apply(self,arguments)}}})}};var api={version:version,modules:{},getOptions:function(){return $.extend({},commonOptions)},setOptions:function(moduleName,moduleOptions){if(arguments.length>1){if(this.modules[moduleName]){$.extend(this.modules[moduleName].prototype.options,moduleOptions)}}else{$.extend(commonOptions,moduleName)}},addModule:function(proto){if($.isFunction(proto)){proto=proto($,window)}
var Module=function(options){if(!options.element.data(commonOptions.dataKey)){options.element.data(commonOptions.dataKey,this)}
customInstances.push(this);this.options=$.extend({},commonOptions,this.options,getInlineOptions(options.element),options);this.bindHandlers();this.init.apply(this,arguments)};var getInlineOptions=function(element){var dataOptions=element.data(commonOptions.optionsKey),attrOptions=element.attr(commonOptions.optionsKey);if(dataOptions){return dataOptions}else if(attrOptions){try{return $.parseJSON(attrOptions)}catch(e){}}};Module.prototype=proto;$.extend(proto,moduleMixin);if(proto.plugins){$.each(proto.plugins,function(pluginName,plugin){$.extend(plugin.prototype,moduleMixin)})}
var originalDestroy=Module.prototype.destroy;Module.prototype.destroy=function(){this.options.element.removeData(this.options.dataKey);for(var i=customInstances.length-1;i>=0;i--){if(customInstances[i]===this){customInstances.splice(i,1);break}}
if(originalDestroy){originalDestroy.apply(this,arguments)}};this.modules[proto.name]=Module},getInstance:function(element){return $(element).data(commonOptions.dataKey)},replace:function(elements,moduleName,customOptions){var self=this,instance;if(!commonOptions.styleSheetCreated){createStyleSheet()}
$(elements).each(function(){var moduleOptions,element=$(this);instance=element.data(commonOptions.dataKey);if(instance){instance.refresh()}else{if(!moduleName){$.each(self.modules,function(currentModuleName,module){if(module.prototype.matchElement.call(module.prototype,element)){moduleName=currentModuleName;return!1}})}
if(moduleName){moduleOptions=$.extend({element:element},customOptions);instance=new self.modules[moduleName](moduleOptions)}}});return instance},refresh:function(elements){$(elements).each(function(){var instance=$(this).data(commonOptions.dataKey);if(instance){instance.refresh()}})},destroy:function(elements){$(elements).each(function(){var instance=$(this).data(commonOptions.dataKey);if(instance){instance.destroy()}})},replaceAll:function(context){var self=this;$.each(this.modules,function(moduleName,module){$(module.prototype.selector,context).each(function(){if(this.className.indexOf('jcf-ignore')<0){self.replace(this,moduleName)}})})},refreshAll:function(context){if(context){$.each(this.modules,function(moduleName,module){$(module.prototype.selector,context).each(function(){var instance=$(this).data(commonOptions.dataKey);if(instance){instance.refresh()}})})}else{for(var i=customInstances.length-1;i>=0;i--){customInstances[i].refresh()}}},destroyAll:function(context){if(context){$.each(this.modules,function(moduleName,module){$(module.prototype.selector,context).each(function(index,element){var instance=$(element).data(commonOptions.dataKey);if(instance){instance.destroy()}})})}else{while(customInstances.length){customInstances[0].destroy()}}}};if(typeof define==='function'&&define.amd){window.jcf=api}
return api}));
/*!
 * JavaScript Custom Forms : Select Module
 *
 * Copyright 2014-2016 PSD2HTML - http://psd2html.com/jcf
 * Released under the MIT license (LICENSE.txt)
 *
 * Version: 1.2.3
 */
(function(jcf){jcf.addModule(function($,window){'use strict';var module={name:'Select',selector:'select',options:{element:null,multipleCompactStyle:!1},plugins:{ListBox:ListBox,ComboBox:ComboBox,SelectList:SelectList},matchElement:function(element){return element.is('select')},init:function(){this.element=$(this.options.element);this.createInstance()},isListBox:function(){return this.element.is('[size]:not([jcf-size]), [multiple]')},createInstance:function(){if(this.instance){this.instance.destroy()}
if(this.isListBox()&&!this.options.multipleCompactStyle&&this.options.isMobileDevice&&this.options.wrapNativeOnMobile){this.options.multipleCompactStyle=!0}
if(this.options.isMobileDevice&&this.options.multipleCompactStyle&&this.options.wrapNativeOnMobile&&!this.element.children('optgroup:first-child').length){$('<optgroup disabled hidden></optgroup>').prependTo(this.element)}
if(this.isListBox()&&!this.options.multipleCompactStyle){this.instance=new ListBox(this.options)}else{this.instance=new ComboBox(this.options)}},refresh:function(){var typeMismatch=(this.isListBox()&&this.instance instanceof ComboBox)||(!this.isListBox()&&this.instance instanceof ListBox);if(typeMismatch){this.createInstance()}else{this.instance.refresh()}},destroy:function(){this.instance.destroy()}};function ComboBox(options){this.options=$.extend({wrapNative:!0,wrapNativeOnMobile:!0,fakeDropInBody:!0,useCustomScroll:!0,flipDropToFit:!0,maxVisibleItems:10,fakeAreaStructure:'<span class="jcf-select"><span class="jcf-select-text"></span><span class="jcf-select-opener"></span></span>',fakeDropStructure:'<div class="jcf-select-drop"><div class="jcf-select-drop-content"></div></div>',optionClassPrefix:'jcf-option-',selectClassPrefix:'jcf-select-',dropContentSelector:'.jcf-select-drop-content',selectTextSelector:'.jcf-select-text',dropActiveClass:'jcf-drop-active',flipDropClass:'jcf-drop-flipped'},options);this.init()}
$.extend(ComboBox.prototype,{init:function(){this.initStructure();this.bindHandlers();this.attachEvents();this.refresh()},initStructure:function(){this.win=$(window);this.doc=$(document);this.realElement=$(this.options.element);this.fakeElement=$(this.options.fakeAreaStructure).insertAfter(this.realElement);this.selectTextContainer=this.fakeElement.find(this.options.selectTextSelector);this.selectText=$('<span></span>').appendTo(this.selectTextContainer);makeUnselectable(this.fakeElement);this.fakeElement.addClass(getPrefixedClasses(this.realElement.prop('className'),this.options.selectClassPrefix));if(this.realElement.prop('multiple')){this.fakeElement.addClass('jcf-compact-multiple')}
if(this.options.isMobileDevice&&this.options.wrapNativeOnMobile&&!this.options.wrapNative){this.options.wrapNative=!0}
if(this.options.wrapNative){this.realElement.prependTo(this.fakeElement).css({position:'absolute',height:'100%',width:'100%'}).addClass(this.options.resetAppearanceClass)}else{this.realElement.addClass(this.options.hiddenClass);this.fakeElement.attr('title',this.realElement.attr('title'));this.fakeDropTarget=this.options.fakeDropInBody?$('body'):this.fakeElement}},attachEvents:function(){var self=this;this.delayedRefresh=function(){setTimeout(function(){self.refresh();if(self.list){self.list.refresh();self.list.scrollToActiveOption()}},1)};if(this.options.wrapNative){this.realElement.on({focus:this.onFocus,change:this.onChange,click:this.onChange,keydown:this.delayedRefresh})}else{this.realElement.on({focus:this.onFocus,change:this.onChange,keydown:this.onKeyDown});this.fakeElement.on({'jcf-pointerdown':this.onSelectAreaPress})}},onKeyDown:function(e){if(e.which===13){this.toggleDropdown()}else if(this.dropActive){this.delayedRefresh()}},onChange:function(){this.refresh()},onFocus:function(){if(!this.pressedFlag||!this.focusedFlag){this.fakeElement.addClass(this.options.focusClass);this.realElement.on('blur',this.onBlur);this.toggleListMode(!0);this.focusedFlag=!0}},onBlur:function(){if(!this.pressedFlag){this.fakeElement.removeClass(this.options.focusClass);this.realElement.off('blur',this.onBlur);this.toggleListMode(!1);this.focusedFlag=!1}},onResize:function(){if(this.dropActive){this.hideDropdown()}},onSelectDropPress:function(){this.pressedFlag=!0},onSelectDropRelease:function(e,pointerEvent){this.pressedFlag=!1;if(pointerEvent.pointerType==='mouse'){this.realElement.focus()}},onSelectAreaPress:function(e){var dropClickedInsideFakeElement=!this.options.fakeDropInBody&&$(e.target).closest(this.dropdown).length;if(dropClickedInsideFakeElement||e.button>1||this.realElement.is(':disabled')){return}
this.selectOpenedByEvent=e.pointerType;this.toggleDropdown();if(!this.focusedFlag){if(e.pointerType==='mouse'){this.realElement.focus()}else{this.onFocus(e)}}
this.pressedFlag=!0;this.fakeElement.addClass(this.options.pressedClass);this.doc.on('jcf-pointerup',this.onSelectAreaRelease)},onSelectAreaRelease:function(e){if(this.focusedFlag&&e.pointerType==='mouse'){this.realElement.focus()}
this.pressedFlag=!1;this.fakeElement.removeClass(this.options.pressedClass);this.doc.off('jcf-pointerup',this.onSelectAreaRelease)},onOutsideClick:function(e){var target=$(e.target),clickedInsideSelect=target.closest(this.fakeElement).length||target.closest(this.dropdown).length;if(!clickedInsideSelect){this.hideDropdown()}},onSelect:function(){this.refresh();if(this.realElement.prop('multiple')){this.repositionDropdown()}else{this.hideDropdown()}
this.fireNativeEvent(this.realElement,'change')},toggleListMode:function(state){if(!this.options.wrapNative){if(state){this.realElement.attr({size:4,'jcf-size':''})}else{if(!this.options.wrapNative){this.realElement.removeAttr('size jcf-size')}}}},createDropdown:function(){if(this.dropdown){this.list.destroy();this.dropdown.remove()}
this.dropdown=$(this.options.fakeDropStructure).appendTo(this.fakeDropTarget);this.dropdown.addClass(getPrefixedClasses(this.realElement.prop('className'),this.options.selectClassPrefix));makeUnselectable(this.dropdown);if(this.realElement.prop('multiple')){this.dropdown.addClass('jcf-compact-multiple')}
if(this.options.fakeDropInBody){this.dropdown.css({position:'absolute',top:-9999})}
this.list=new SelectList({useHoverClass:!0,handleResize:!1,alwaysPreventMouseWheel:!0,maxVisibleItems:this.options.maxVisibleItems,useCustomScroll:this.options.useCustomScroll,holder:this.dropdown.find(this.options.dropContentSelector),multipleSelectWithoutKey:this.realElement.prop('multiple'),element:this.realElement});$(this.list).on({select:this.onSelect,press:this.onSelectDropPress,release:this.onSelectDropRelease})},repositionDropdown:function(){var selectOffset=this.fakeElement.offset(),fakeElementBounds=this.fakeElement[0].getBoundingClientRect(),selectWidth=fakeElementBounds.width||fakeElementBounds.right-fakeElementBounds.left,selectHeight=this.fakeElement.outerHeight(),dropHeight=this.dropdown.css('width',selectWidth).outerHeight(),winScrollTop=this.win.scrollTop(),winHeight=this.win.height(),calcTop,calcLeft,bodyOffset,needFlipDrop=!1;if(selectOffset.top+selectHeight+dropHeight>winScrollTop+winHeight&&selectOffset.top-dropHeight>winScrollTop){needFlipDrop=!0}
if(this.options.fakeDropInBody){bodyOffset=this.fakeDropTarget.css('position')!=='static'?this.fakeDropTarget.offset().top:0;if(this.options.flipDropToFit&&needFlipDrop){calcLeft=selectOffset.left;calcTop=selectOffset.top-dropHeight-bodyOffset}else{calcLeft=selectOffset.left;calcTop=selectOffset.top+selectHeight-bodyOffset}
this.dropdown.css({width:selectWidth,left:calcLeft,top:calcTop})}
this.dropdown.add(this.fakeElement).toggleClass(this.options.flipDropClass,this.options.flipDropToFit&&needFlipDrop)},showDropdown:function(){if(!this.realElement.prop('options').length){return}
if(!this.dropdown){this.createDropdown()}
this.dropActive=!0;this.dropdown.appendTo(this.fakeDropTarget);this.fakeElement.addClass(this.options.dropActiveClass);this.refreshSelectedText();this.repositionDropdown();this.list.setScrollTop(this.savedScrollTop);this.list.refresh();this.win.on('resize',this.onResize);this.doc.on('jcf-pointerdown',this.onOutsideClick)},hideDropdown:function(){if(this.dropdown){this.savedScrollTop=this.list.getScrollTop();this.fakeElement.removeClass(this.options.dropActiveClass+' '+this.options.flipDropClass);this.dropdown.removeClass(this.options.flipDropClass).detach();this.doc.off('jcf-pointerdown',this.onOutsideClick);this.win.off('resize',this.onResize);this.dropActive=!1;if(this.selectOpenedByEvent==='touch'){this.onBlur()}}},toggleDropdown:function(){if(this.dropActive){this.hideDropdown()}else{this.showDropdown()}},refreshSelectedText:function(){var selectedIndex=this.realElement.prop('selectedIndex'),selectedOption=this.realElement.prop('options')[selectedIndex],selectedOptionImage=selectedOption?selectedOption.getAttribute('data-image'):null,selectedOptionText='',selectedOptionClasses,self=this;if(this.realElement.prop('multiple')){$.each(this.realElement.prop('options'),function(index,option){if(option.selected){selectedOptionText+=(selectedOptionText?', ':'')+option.innerHTML}});if(!selectedOptionText){selectedOptionText=self.realElement.attr('placeholder')||''}
this.selectText.removeAttr('class').html(selectedOptionText)}else if(!selectedOption){if(this.selectImage){this.selectImage.hide()}
this.selectText.removeAttr('class').empty()}else if(this.currentSelectedText!==selectedOption.innerHTML||this.currentSelectedImage!==selectedOptionImage){selectedOptionClasses=getPrefixedClasses(selectedOption.className,this.options.optionClassPrefix);this.selectText.attr('class',selectedOptionClasses).html(selectedOption.innerHTML);if(selectedOptionImage){if(!this.selectImage){this.selectImage=$('<img>').prependTo(this.selectTextContainer).hide()}
this.selectImage.attr('src',selectedOptionImage).show()}else if(this.selectImage){this.selectImage.hide()}
this.currentSelectedText=selectedOption.innerHTML;this.currentSelectedImage=selectedOptionImage}},refresh:function(){if(this.realElement.prop('style').display==='none'){this.fakeElement.hide()}else{this.fakeElement.show()}
this.refreshSelectedText();this.fakeElement.toggleClass(this.options.disabledClass,this.realElement.is(':disabled'))},destroy:function(){if(this.options.wrapNative){this.realElement.insertBefore(this.fakeElement).css({position:'',height:'',width:''}).removeClass(this.options.resetAppearanceClass)}else{this.realElement.removeClass(this.options.hiddenClass);if(this.realElement.is('[jcf-size]')){this.realElement.removeAttr('size jcf-size')}}
this.fakeElement.remove();this.doc.off('jcf-pointerup',this.onSelectAreaRelease);this.realElement.off({focus:this.onFocus})}});function ListBox(options){this.options=$.extend({wrapNative:!0,useCustomScroll:!0,fakeStructure:'<span class="jcf-list-box"><span class="jcf-list-wrapper"></span></span>',selectClassPrefix:'jcf-select-',listHolder:'.jcf-list-wrapper'},options);this.init()}
$.extend(ListBox.prototype,{init:function(){this.bindHandlers();this.initStructure();this.attachEvents()},initStructure:function(){this.realElement=$(this.options.element);this.fakeElement=$(this.options.fakeStructure).insertAfter(this.realElement);this.listHolder=this.fakeElement.find(this.options.listHolder);makeUnselectable(this.fakeElement);this.fakeElement.addClass(getPrefixedClasses(this.realElement.prop('className'),this.options.selectClassPrefix));this.realElement.addClass(this.options.hiddenClass);this.list=new SelectList({useCustomScroll:this.options.useCustomScroll,holder:this.listHolder,selectOnClick:!1,element:this.realElement})},attachEvents:function(){var self=this;this.delayedRefresh=function(e){if(e&&(e.which===16||e.ctrlKey||e.metaKey||e.altKey)){return}else{clearTimeout(self.refreshTimer);self.refreshTimer=setTimeout(function(){self.refresh();self.list.scrollToActiveOption()},1)}};this.realElement.on({focus:this.onFocus,click:this.delayedRefresh,keydown:this.delayedRefresh});$(this.list).on({select:this.onSelect,press:this.onFakeOptionsPress,release:this.onFakeOptionsRelease})},onFakeOptionsPress:function(e,pointerEvent){this.pressedFlag=!0;if(pointerEvent.pointerType==='mouse'){this.realElement.focus()}},onFakeOptionsRelease:function(e,pointerEvent){this.pressedFlag=!1;if(pointerEvent.pointerType==='mouse'){this.realElement.focus()}},onSelect:function(){this.fireNativeEvent(this.realElement,'change');this.fireNativeEvent(this.realElement,'click')},onFocus:function(){if(!this.pressedFlag||!this.focusedFlag){this.fakeElement.addClass(this.options.focusClass);this.realElement.on('blur',this.onBlur);this.focusedFlag=!0}},onBlur:function(){if(!this.pressedFlag){this.fakeElement.removeClass(this.options.focusClass);this.realElement.off('blur',this.onBlur);this.focusedFlag=!1}},refresh:function(){this.fakeElement.toggleClass(this.options.disabledClass,this.realElement.is(':disabled'));this.list.refresh()},destroy:function(){this.list.destroy();this.realElement.insertBefore(this.fakeElement).removeClass(this.options.hiddenClass);this.fakeElement.remove()}});function SelectList(options){this.options=$.extend({holder:null,maxVisibleItems:10,selectOnClick:!0,useHoverClass:!1,useCustomScroll:!1,handleResize:!0,multipleSelectWithoutKey:!1,alwaysPreventMouseWheel:!1,indexAttribute:'data-index',cloneClassPrefix:'jcf-option-',containerStructure:'<span class="jcf-list"><span class="jcf-list-content"></span></span>',containerSelector:'.jcf-list-content',captionClass:'jcf-optgroup-caption',disabledClass:'jcf-disabled',optionClass:'jcf-option',groupClass:'jcf-optgroup',hoverClass:'jcf-hover',selectedClass:'jcf-selected',scrollClass:'jcf-scroll-active'},options);this.init()}
$.extend(SelectList.prototype,{init:function(){this.initStructure();this.refreshSelectedClass();this.attachEvents()},initStructure:function(){this.element=$(this.options.element);this.indexSelector='['+this.options.indexAttribute+']';this.container=$(this.options.containerStructure).appendTo(this.options.holder);this.listHolder=this.container.find(this.options.containerSelector);this.lastClickedIndex=this.element.prop('selectedIndex');this.rebuildList();if(this.element.prop('multiple')){this.previousSelection=this.getSelectedOptionsIndexes()}},attachEvents:function(){this.bindHandlers();this.listHolder.on('jcf-pointerdown',this.indexSelector,this.onItemPress);this.listHolder.on('jcf-pointerdown',this.onPress);if(this.options.useHoverClass){this.listHolder.on('jcf-pointerover',this.indexSelector,this.onHoverItem)}},onPress:function(e){$(this).trigger('press',e);this.listHolder.on('jcf-pointerup',this.onRelease)},onRelease:function(e){$(this).trigger('release',e);this.listHolder.off('jcf-pointerup',this.onRelease)},onHoverItem:function(e){var hoverIndex=parseFloat(e.currentTarget.getAttribute(this.options.indexAttribute));this.fakeOptions.removeClass(this.options.hoverClass).eq(hoverIndex).addClass(this.options.hoverClass)},onItemPress:function(e){if(e.pointerType==='touch'||this.options.selectOnClick){this.tmpListOffsetTop=this.list.offset().top;this.listHolder.on('jcf-pointerup',this.indexSelector,this.onItemRelease)}else{this.onSelectItem(e)}},onItemRelease:function(e){this.listHolder.off('jcf-pointerup',this.indexSelector,this.onItemRelease);if(this.tmpListOffsetTop===this.list.offset().top){this.listHolder.on('click',this.indexSelector,{savedPointerType:e.pointerType},this.onSelectItem)}
delete this.tmpListOffsetTop},onSelectItem:function(e){var clickedIndex=parseFloat(e.currentTarget.getAttribute(this.options.indexAttribute)),pointerType=e.data&&e.data.savedPointerType||e.pointerType||'mouse',range;this.listHolder.off('click',this.indexSelector,this.onSelectItem);if(e.button>1||this.realOptions[clickedIndex].disabled){return}
if(this.element.prop('multiple')){if(e.metaKey||e.ctrlKey||pointerType==='touch'||this.options.multipleSelectWithoutKey){this.realOptions[clickedIndex].selected=!this.realOptions[clickedIndex].selected}else if(e.shiftKey){range=[this.lastClickedIndex,clickedIndex].sort(function(a,b){return a-b});this.realOptions.each(function(index,option){option.selected=(index>=range[0]&&index<=range[1])})}else{this.element.prop('selectedIndex',clickedIndex)}}else{this.element.prop('selectedIndex',clickedIndex)}
if(!e.shiftKey){this.lastClickedIndex=clickedIndex}
this.refreshSelectedClass();if(pointerType==='mouse'){this.scrollToActiveOption()}
$(this).trigger('select')},rebuildList:function(){var self=this,rootElement=this.element[0];this.storedSelectHTML=rootElement.innerHTML;this.optionIndex=0;this.list=$(this.createOptionsList(rootElement));this.listHolder.empty().append(this.list);this.realOptions=this.element.find('option');this.fakeOptions=this.list.find(this.indexSelector);this.fakeListItems=this.list.find('.'+this.options.captionClass+','+this.indexSelector);delete this.optionIndex;var maxCount=this.options.maxVisibleItems,sizeValue=this.element.prop('size');if(sizeValue>1&&!this.element.is('[jcf-size]')){maxCount=sizeValue}
var needScrollBar=this.fakeOptions.length>maxCount;this.container.toggleClass(this.options.scrollClass,needScrollBar);if(needScrollBar){this.listHolder.css({maxHeight:this.getOverflowHeight(maxCount),overflow:'auto'});if(this.options.useCustomScroll&&jcf.modules.Scrollable){jcf.replace(this.listHolder,'Scrollable',{handleResize:this.options.handleResize,alwaysPreventMouseWheel:this.options.alwaysPreventMouseWheel});return}}
if(this.options.alwaysPreventMouseWheel){this.preventWheelHandler=function(e){var currentScrollTop=self.listHolder.scrollTop(),maxScrollTop=self.listHolder.prop('scrollHeight')-self.listHolder.innerHeight();if((currentScrollTop<=0&&e.deltaY<0)||(currentScrollTop>=maxScrollTop&&e.deltaY>0)){e.preventDefault()}};this.listHolder.on('jcf-mousewheel',this.preventWheelHandler)}},refreshSelectedClass:function(){var self=this,selectedItem,isMultiple=this.element.prop('multiple'),selectedIndex=this.element.prop('selectedIndex');if(isMultiple){this.realOptions.each(function(index,option){self.fakeOptions.eq(index).toggleClass(self.options.selectedClass,!!option.selected)})}else{this.fakeOptions.removeClass(this.options.selectedClass+' '+this.options.hoverClass);selectedItem=this.fakeOptions.eq(selectedIndex).addClass(this.options.selectedClass);if(this.options.useHoverClass){selectedItem.addClass(this.options.hoverClass)}}},scrollToActiveOption:function(){var targetOffset=this.getActiveOptionOffset();if(typeof targetOffset==='number'){this.listHolder.prop('scrollTop',targetOffset)}},getSelectedOptionsIndexes:function(){var selection=[];this.realOptions.each(function(index,option){if(option.selected){selection.push(index)}});return selection},getChangedSelectedIndex:function(){var selectedIndex=this.element.prop('selectedIndex'),self=this,found=!1,targetIndex=null;if(this.element.prop('multiple')){this.currentSelection=this.getSelectedOptionsIndexes();$.each(this.currentSelection,function(index,optionIndex){if(!found&&self.previousSelection.indexOf(optionIndex)<0){if(index===0){found=!0}
targetIndex=optionIndex}});this.previousSelection=this.currentSelection;return targetIndex}else{return selectedIndex}},getActiveOptionOffset:function(){var currentIndex=this.getChangedSelectedIndex();if(currentIndex===null){return}
var dropHeight=this.listHolder.height(),dropScrollTop=this.listHolder.prop('scrollTop'),fakeOption=this.fakeOptions.eq(currentIndex),fakeOptionOffset=fakeOption.offset().top-this.list.offset().top,fakeOptionHeight=fakeOption.innerHeight();if(fakeOptionOffset+fakeOptionHeight>=dropScrollTop+dropHeight){return fakeOptionOffset-dropHeight+fakeOptionHeight}else if(fakeOptionOffset<dropScrollTop){return fakeOptionOffset}},getOverflowHeight:function(sizeValue){var item=this.fakeListItems.eq(sizeValue-1),listOffset=this.list.offset().top,itemOffset=item.offset().top,itemHeight=item.innerHeight();return itemOffset+itemHeight-listOffset},getScrollTop:function(){return this.listHolder.scrollTop()},setScrollTop:function(value){this.listHolder.scrollTop(value)},createOption:function(option){var newOption=document.createElement('span');newOption.className=this.options.optionClass;newOption.innerHTML=option.innerHTML;newOption.setAttribute(this.options.indexAttribute,this.optionIndex++);var optionImage,optionImageSrc=option.getAttribute('data-image');if(optionImageSrc){optionImage=document.createElement('img');optionImage.src=optionImageSrc;newOption.insertBefore(optionImage,newOption.childNodes[0])}
if(option.disabled){newOption.className+=' '+this.options.disabledClass}
if(option.className){newOption.className+=' '+getPrefixedClasses(option.className,this.options.cloneClassPrefix)}
return newOption},createOptGroup:function(optgroup){var optGroupContainer=document.createElement('span'),optGroupName=optgroup.getAttribute('label'),optGroupCaption,optGroupList;optGroupCaption=document.createElement('span');optGroupCaption.className=this.options.captionClass;optGroupCaption.innerHTML=optGroupName;optGroupContainer.appendChild(optGroupCaption);if(optgroup.children.length){optGroupList=this.createOptionsList(optgroup);optGroupContainer.appendChild(optGroupList)}
optGroupContainer.className=this.options.groupClass;return optGroupContainer},createOptionContainer:function(){var optionContainer=document.createElement('li');return optionContainer},createOptionsList:function(container){var self=this,list=document.createElement('ul');$.each(container.children,function(index,currentNode){var item=self.createOptionContainer(currentNode),newNode;switch(currentNode.tagName.toLowerCase()){case 'option':newNode=self.createOption(currentNode);break;case 'optgroup':newNode=self.createOptGroup(currentNode);break}
list.appendChild(item).appendChild(newNode)});return list},refresh:function(){if(this.storedSelectHTML!==this.element.prop('innerHTML')){this.rebuildList()}
var scrollInstance=jcf.getInstance(this.listHolder);if(scrollInstance){scrollInstance.refresh()}
this.refreshSelectedClass()},destroy:function(){this.listHolder.off('jcf-mousewheel',this.preventWheelHandler);this.listHolder.off('jcf-pointerdown',this.indexSelector,this.onSelectItem);this.listHolder.off('jcf-pointerover',this.indexSelector,this.onHoverItem);this.listHolder.off('jcf-pointerdown',this.onPress)}});var getPrefixedClasses=function(className,prefixToAdd){return className?className.replace(/[\s]*([\S]+)+[\s]*/gi,prefixToAdd+'$1 '):''};var makeUnselectable=(function(){var unselectableClass=jcf.getOptions().unselectableClass;function preventHandler(e){e.preventDefault()}
return function(node){node.addClass(unselectableClass).on('selectstart',preventHandler)}}());return module})}(jcf));
/*!
 * JavaScript Custom Forms : Radio Module
 *
 * Copyright 2014-2016 PSD2HTML - http://psd2html.com/jcf
 * Released under the MIT license (LICENSE.txt)
 *
 * Version: 1.2.3
 */
(function(jcf){jcf.addModule(function($){'use strict';return{name:'Radio',selector:'input[type="radio"]',options:{wrapNative:!0,checkedClass:'jcf-checked',uncheckedClass:'jcf-unchecked',labelActiveClass:'jcf-label-active',fakeStructure:'<span class="jcf-radio"><span></span></span>'},matchElement:function(element){return element.is(':radio')},init:function(){this.initStructure();this.attachEvents();this.refresh()},initStructure:function(){this.doc=$(document);this.realElement=$(this.options.element);this.fakeElement=$(this.options.fakeStructure).insertAfter(this.realElement);this.labelElement=this.getLabelFor();if(this.options.wrapNative){this.realElement.prependTo(this.fakeElement).css({position:'absolute',opacity:0})}else{this.realElement.addClass(this.options.hiddenClass)}},attachEvents:function(){this.realElement.on({focus:this.onFocus,click:this.onRealClick});this.fakeElement.on('click',this.onFakeClick);this.fakeElement.on('jcf-pointerdown',this.onPress)},onRealClick:function(e){var self=this;this.savedEventObject=e;setTimeout(function(){self.refreshRadioGroup()},0)},onFakeClick:function(e){if(this.options.wrapNative&&this.realElement.is(e.target)){return}
if(!this.realElement.is(':disabled')){delete this.savedEventObject;this.currentActiveRadio=this.getCurrentActiveRadio();this.stateChecked=this.realElement.prop('checked');this.realElement.prop('checked',!0);this.fireNativeEvent(this.realElement,'click');if(this.savedEventObject&&this.savedEventObject.isDefaultPrevented()){this.realElement.prop('checked',this.stateChecked);this.currentActiveRadio.prop('checked',!0)}else{this.fireNativeEvent(this.realElement,'change')}
delete this.savedEventObject}},onFocus:function(){if(!this.pressedFlag||!this.focusedFlag){this.focusedFlag=!0;this.fakeElement.addClass(this.options.focusClass);this.realElement.on('blur',this.onBlur)}},onBlur:function(){if(!this.pressedFlag){this.focusedFlag=!1;this.fakeElement.removeClass(this.options.focusClass);this.realElement.off('blur',this.onBlur)}},onPress:function(e){if(!this.focusedFlag&&e.pointerType==='mouse'){this.realElement.focus()}
this.pressedFlag=!0;this.fakeElement.addClass(this.options.pressedClass);this.doc.on('jcf-pointerup',this.onRelease)},onRelease:function(e){if(this.focusedFlag&&e.pointerType==='mouse'){this.realElement.focus()}
this.pressedFlag=!1;this.fakeElement.removeClass(this.options.pressedClass);this.doc.off('jcf-pointerup',this.onRelease)},getCurrentActiveRadio:function(){return this.getRadioGroup(this.realElement).filter(':checked')},getRadioGroup:function(radio){var name=radio.attr('name'),parentForm=radio.parents('form');if(name){if(parentForm.length){return parentForm.find('input[name="'+name+'"]')}else{return $('input[name="'+name+'"]:not(form input)')}}else{return radio}},getLabelFor:function(){var parentLabel=this.realElement.closest('label'),elementId=this.realElement.prop('id');if(!parentLabel.length&&elementId){parentLabel=$('label[for="'+elementId+'"]')}
return parentLabel.length?parentLabel:null},refreshRadioGroup:function(){this.getRadioGroup(this.realElement).each(function(){jcf.refresh(this)})},refresh:function(){var isChecked=this.realElement.is(':checked'),isDisabled=this.realElement.is(':disabled');this.fakeElement.toggleClass(this.options.checkedClass,isChecked).toggleClass(this.options.uncheckedClass,!isChecked).toggleClass(this.options.disabledClass,isDisabled);if(this.labelElement){this.labelElement.toggleClass(this.options.labelActiveClass,isChecked)}},destroy:function(){if(this.options.wrapNative){this.realElement.insertBefore(this.fakeElement).css({position:'',width:'',height:'',opacity:'',margin:''})}else{this.realElement.removeClass(this.options.hiddenClass)}
this.fakeElement.off('jcf-pointerdown',this.onPress);this.fakeElement.remove();this.doc.off('jcf-pointerup',this.onRelease);this.realElement.off({blur:this.onBlur,focus:this.onFocus,click:this.onRealClick})}}})}(jcf));/*!
 * JavaScript Custom Forms : Checkbox Module
 *
 * Copyright 2014-2016 PSD2HTML - http://psd2html.com/jcf
 * Released under the MIT license (LICENSE.txt)
 *
 * Version: 1.2.3
 */
(function(jcf){jcf.addModule(function($){'use strict';return{name:'Checkbox',selector:'input[type="checkbox"]',options:{wrapNative:!0,checkedClass:'jcf-checked',uncheckedClass:'jcf-unchecked',labelActiveClass:'jcf-label-active',fakeStructure:'<span class="jcf-checkbox"><span></span></span>'},matchElement:function(element){return element.is(':checkbox')},init:function(){this.initStructure();this.attachEvents();this.refresh()},initStructure:function(){this.doc=$(document);this.realElement=$(this.options.element);this.fakeElement=$(this.options.fakeStructure).insertAfter(this.realElement);this.labelElement=this.getLabelFor();if(this.options.wrapNative){this.realElement.appendTo(this.fakeElement).css({position:'absolute',height:'100%',width:'100%',opacity:0,margin:0})}else{this.realElement.addClass(this.options.hiddenClass)}},attachEvents:function(){this.realElement.on({focus:this.onFocus,click:this.onRealClick});this.fakeElement.on('click',this.onFakeClick);this.fakeElement.on('jcf-pointerdown',this.onPress)},onRealClick:function(e){var self=this;this.savedEventObject=e;setTimeout(function(){self.refresh()},0)},onFakeClick:function(e){if(this.options.wrapNative&&this.realElement.is(e.target)){return}
if(!this.realElement.is(':disabled')){delete this.savedEventObject;this.stateChecked=this.realElement.prop('checked');this.realElement.prop('checked',!this.stateChecked);this.fireNativeEvent(this.realElement,'click');if(this.savedEventObject&&this.savedEventObject.isDefaultPrevented()){this.realElement.prop('checked',this.stateChecked)}else{this.fireNativeEvent(this.realElement,'change')}
delete this.savedEventObject}},onFocus:function(){if(!this.pressedFlag||!this.focusedFlag){this.focusedFlag=!0;this.fakeElement.addClass(this.options.focusClass);this.realElement.on('blur',this.onBlur)}},onBlur:function(){if(!this.pressedFlag){this.focusedFlag=!1;this.fakeElement.removeClass(this.options.focusClass);this.realElement.off('blur',this.onBlur)}},onPress:function(e){if(!this.focusedFlag&&e.pointerType==='mouse'){this.realElement.focus()}
this.pressedFlag=!0;this.fakeElement.addClass(this.options.pressedClass);this.doc.on('jcf-pointerup',this.onRelease)},onRelease:function(e){if(this.focusedFlag&&e.pointerType==='mouse'){this.realElement.focus()}
this.pressedFlag=!1;this.fakeElement.removeClass(this.options.pressedClass);this.doc.off('jcf-pointerup',this.onRelease)},getLabelFor:function(){var parentLabel=this.realElement.closest('label'),elementId=this.realElement.prop('id');if(!parentLabel.length&&elementId){parentLabel=$('label[for="'+elementId+'"]')}
return parentLabel.length?parentLabel:null},refresh:function(){var isChecked=this.realElement.is(':checked'),isDisabled=this.realElement.is(':disabled');this.fakeElement.toggleClass(this.options.checkedClass,isChecked).toggleClass(this.options.uncheckedClass,!isChecked).toggleClass(this.options.disabledClass,isDisabled);if(this.labelElement){this.labelElement.toggleClass(this.options.labelActiveClass,isChecked)}},destroy:function(){if(this.options.wrapNative){this.realElement.insertBefore(this.fakeElement).css({position:'',width:'',height:'',opacity:'',margin:''})}else{this.realElement.removeClass(this.options.hiddenClass)}
this.fakeElement.off('jcf-pointerdown',this.onPress);this.fakeElement.remove();this.doc.off('jcf-pointerup',this.onRelease);this.realElement.off({focus:this.onFocus,click:this.onRealClick})}}})}(jcf))